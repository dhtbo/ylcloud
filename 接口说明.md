# 接口说明文档

## 目录
- [登录信息](#登录信息)
- [获取企业列表API](#获取企业列表api)
  - [接口概述](#接口概述)
  - [请求参数](#请求参数)
  - [请求头](#请求头)
  - [请求体](#请求体)
  - [响应格式](#响应格式)
  - [响应参数说明](#响应参数说明)
  - [调用示例](#调用示例)
  - [错误码说明](#错误码说明)

## 登录信息
- **登录地址**: https://111.63.37.92:996/admin/login
- **默认账号**: admin
- **默认密码**: Yealink@2025

## 获取企业列表API

### 接口概述
- **接口地址**: https://111.63.37.92:996/admin/user-manager/api/v1/admin/enterprise/pagedList
- **请求方法**: POST
- **接口描述**: 获取企业列表，支持分页查询
- **权限要求**: 管理员权限
- **SSL要求**: 该接口使用HTTPS，但可能存在证书验证问题，调用时需忽略证书验证

### 请求头
| 参数名 | 类型 | 必须 | 描述 |
|--------|------|------|------|
| Cookie | string | 是 | 登录后获取的Cookie，包含WEBYMSADMIN和language |

### 请求体
```json
{
  "skip": 0,
  "limit": 10,
  "autoCount": true,
  "serviceOwnership": 1
}
```

### 请求参数说明
| 参数名 | 类型 | 必须 | 描述 | 示例值 |
|--------|------|------|------|--------|
| skip | number | 否 | 分页起始位置，默认为0 | 0 |
| limit | number | 否 | 每页记录数，默认为10 | 10 |
| autoCount | boolean | 否 | 是否自动计算总记录数 | true |
| serviceOwnership | number | 否 | 服务归属，1表示自有服务 | 1 |

### 响应格式
```json
{
  "ret": 2,
  "data": {
    "skip": 0,
    "limit": 10,
    "total": 2,
    "autoCount": true,
    "orderBys": [
      {
        "field": "e.create_time",
        "order": -1
      }
    ],
    "data": [
      {
        "id": "49892e29874645d39ec613b5e8b577f9",
        "number": "045754",
        "name": "测试企业1",
        "status": 20,
        "country": "CN",
        "area": "CN-BJ",
        "managerName": "admin1001",
        "createTime": 1756171576949
      },
      {
        "id": "c13c6641dd5d4fd5b3341a9f4902673d",
        "number": "013003",
        "name": "河北省农村信用社",
        "status": 20,
        "country": "CN",
        "area": "CN-HE",
        "managerName": "0000",
        "createTime": 1756102214881
      }
    ]
  },
  "statusCode": 200,
  "bizCode": 900200,
  "error": null
}
```

### 响应参数说明
| 参数名 | 类型 | 描述 |
|--------|------|------|
| ret | number | 接口返回状态码，2表示成功 |
| statusCode | number | HTTP状态码 |
| bizCode | number | 业务状态码，900200表示成功 |
| data | object | 响应数据主体 |
| data.skip | number | 分页起始位置 |
| data.limit | number | 每页记录数 |
| data.total | number | 总记录数 |
| data.data | array | 企业列表数据 |
| data.data[].number | string | 企业号 |
| data.data[].name | string | 企业名称 |
| data.data[].status | number | 企业状态，20表示正常 |
| data.data[].country | string | 国家代码 |
| data.data[].area | string | 地区代码，格式为国家-地区 |
| data.data[].managerName | string | 企业管理员名称 |
| data.data[].createTime | number | 创建时间戳(毫秒) |

### 状态码说明
| 状态码 | 描述 |
|--------|------|
| 20 | 企业状态正常 |
| 2 | 接口调用成功 |
| 200 | HTTP请求成功 |
| 900200 | 业务处理成功 |

### 调用示例

#### Curl示例
```bash
curl -X POST https://111.63.37.92:996/admin/user-manager/api/v1/admin/enterprise/pagedList \
  -H "Content-Type: application/json" \
  -H "Cookie: WEBYMSADMIN=your_cookie_value; language=zh" \
  --insecure \
  -d '{"skip":0,"limit":10,"autoCount":true,"serviceOwnership":1}'
```

#### JavaScript示例
```javascript
const axios = require('axios');
const https = require('https');

const httpsAgent = new https.Agent({
  rejectUnauthorized: false
});

async function getEnterpriseList() {
  try {
    const response = await axios.post(
      'https://111.63.37.92:996/admin/user-manager/api/v1/admin/enterprise/pagedList',
      {
        skip: 0,
        limit: 10,
        autoCount: true,
        serviceOwnership: 1
      },
      {
        headers: {
          'Cookie': 'WEBYMSADMIN=your_cookie_value; language=zh',
          'Content-Type': 'application/json'
        },
        httpsAgent: httpsAgent
      }
    );
    console.log(response.data);
  } catch (error) {
    console.error('Error:', error.message);
  }
}

getEnterpriseList();
```

### 注意事项
1. 该接口需要登录后获取WEBYMSADMIN cookie才能调用
2. 由于目标服务器使用自签名证书，调用时需要忽略SSL证书验证
3. createTime字段为毫秒级时间戳，需要转换为本地时间格式
4. area字段格式为"国家-地区"，如CN-BJ表示中国北京